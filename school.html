<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="text/javascript">
      // let btn = document.getElementById('btn')

  window.addEventListener('load', (event) => {
      // alert('page is fully loaded');
      var length = 15;
      var result = '';
      var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      var charactersLength = characters.length;
      for (var i = 0; i < length; i++) {
        result += characters.charAt(Math.floor(Math.random() *
                                               charactersLength));
      }
      console.log(result)
     document.getElementById('trnx').value = result;
  });




      function postData (){
        let amount = document.getElementById('amount').value
        let trnx = document.getElementById('trnx').value
        let zcode = document.getElementById('zcode').value
        let mobile = document.getElementById('mobile').value
        let email = document.getElementById('email').value
        let callBackUrl = document.getElementById('callBackUrl').value





        const headers = {
          "Content-Type": "application/json",
          "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL3phaW5wYXkubmciLCJpYXQiOjE2NTM4OTg5MTIsImlkIjo3YzMzYzIyNi01MDAwLTQwZGEtODBhNi0yZTlhOTA4NTVhODcsIm5hbWUiOm11bmlyLmFidWJha2FyQGl0Y2dsb2JhbC5uZywicm9sZSI6bXVuaXIuYWJ1YmFrYXJAaXRjZ2xvYmFsLm5nLCJzZWNyZXRLZXkiOkxURG1nZ0FCNkdCSUo3dFMzT1FRVEFEWTh5UzMyWEI5UkxpcE9lOHNEV3NXQ30.f7KWFB_pLPIg023ni_aO7RUNg-NkdWbiXj2RiwHUy34"
        }

        const PostData = {
          // "amount": "100",
          // "txnRef" : "QmL851rsgdTYkej20O055",
          // "mobileNumber": "08068869098",
          // "zainboxCode": "THbfnDvK5o",
          // "emailAddress": "info@betastack.ng"
          // "successCallBackUrl": "https://kano.com",
        	// "failureCallBackUrl": "https://kanonia.com"

          "amount":amount,
          "txnRef" : trnx,
          "mobileNumber": mobile,
          "zainboxCode": zcode,
          "emailAddress": email,
        	"callBackUrl": callBackUrl,
        }
        console.log(PostData)
        axios.post('https://sandbox.zainpay.ng/zainbox/card/initialize/payment', PostData, {
           headers: headers
       })
       .then((response) => {
           // string.replace('find1', 'replace1').replace('find2', 'replace2');
           console.log(response);
          //  var url= response.data.data.replace("https://card.zainpay.ng/index.php", "http://localhost:8081/merchant/redirect-payment")
           // var url= response.data.data.replace("https://card.zainpay.ng/index.php", "https://zainpay.schoolmanager.info/merchant/redirect-payment")

          //  var url= response.data.data.replace("https://card.zainpay.ng/index.php", "http://sandbox.kigra.gov.ng:8065/merchant/redirect-payment")
           var url= response.data.data.replace("https://card.zainpay.ng/index.php", "https://dev.zainpay.ng/merchant/redirect-payment")

           window.location.replace(url)
       }, (error) => {
           console.log(error);
       });
      }
    </script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-offset-2 col-md-8">
          <h1 class="text-center">Hassal Honey</h1>

          <form action="" target="_blank">
            <div class="form-group">
            <label for="amount">Amount</label>
            <input type="text" class="form-control" name="" value="100" id="amount" disabled>
          </div>

          <div class="form-group">
            <label for="trnx">Transaction Code</label>
            <input type="text" class="form-control" name=""  id="trnx">
          </div>


          <div class="form-group">
            <label for="zcode">Zainbox Code</label>
            <input type="text" class="form-control" name="" value="THbfnDvK5o" id="zcode" disabled>
          </div>

          <div class="form-group">
            <label for="mobile">Mobile</label>
            <input type="text" class="form-control" name="" value="08068869098" id="mobile" disabled>
          </div>

          <div class="form-group">
            <label for="zcode">Email Address</label>
            <input type="email" class="form-control" name="" value="info@betastack.ng" id="email" disabled>
          </div>

          <div class="form-group">
            <label for="failureCB">Callback</label>
            <input type="text" class="form-control" name="" value="https://kosa4real.github.io/hasal/school" id="callBackUrl" disabled>
          </div>


          <button onclick="postData()" class="btn btn-primary" type="button" id="btn" name="button">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
